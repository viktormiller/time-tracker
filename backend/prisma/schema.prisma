generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-arm64-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Unified model for all time entries
model TimeEntry {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  source      String   // "TOGGL" | "TEMPO" | "API_..."
  externalId  String?  // Optional ID from external system
  date        DateTime @db.Timestamptz(6) // The actual date of work
  duration    Float    // Duration in hours (decimal)
  project     String?  // e.g. "forHim" or "WEKA-199"
  description String?  // Task description
  createdAt   DateTime @default(now()) @db.Timestamptz(6)

  // Kombinierter Unique Index
  // Ein Eintrag ist eindeutig durch seine Quelle und seine externe ID.
  @@unique([source, externalId])
  @@index([date])
}
